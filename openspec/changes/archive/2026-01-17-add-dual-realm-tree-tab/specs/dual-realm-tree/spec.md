# dual-realm-tree 规范

## 目的
提供“双界树”页面，用于将累计放弃与累计达成的数量以双树形式展示，左侧向下生长进入海底，右侧向上生长进入天空，并按高度解锁对应的未知生物。

## 新增需求
### 需求：双界树页面入口
系统必须在 Tab 导航中新增“双界树”页面入口。

#### 场景：进入双界树
- **当** 用户点击“双界树”Tab
- **那么** 系统进入“双界树”页面并展示双树布局

### 需求：全屏双树展示
系统必须在“双界树”页面以全屏方式展示左右双树，不显示主标题或副标题。

#### 场景：全屏显示
- **当** 用户进入“双界树”页面
- **那么** 双树布局占据可视区域并不展示页面标题文本

### 需求：生长端居中视窗
系统必须让双树各自的生长端始终位于各自视窗的视觉中心。

#### 场景：生长端居中
- **当** 放弃树或达成树高度变化
- **那么** 系统调整各自视窗以将生长端保持在视觉中心

### 需求：双树高度计算
系统必须按累计数量线性计算树高：每增加 1 条记录，树高增加 1 米。

#### 场景：放弃树高度
- **当** 累计放弃数量变化
- **那么** 系统按 1 条 = 1 米更新放弃树高度

#### 场景：达成树高度
- **当** 累计达成数量变化
- **那么** 系统按 1 条 = 1 米更新达成树高度

### 需求：上下生长与环境分层
系统必须让放弃树从地平线向下生长进入海底，达成树从地平线向上生长进入天空，并以环境层级呈现视觉区分。

#### 场景：放弃树向下生长
- **当** 放弃树高度增加
- **那么** 树体向下延展，并显示海底区域

#### 场景：达成树向上生长
- **当** 达成树高度增加
- **那么** 树体向上延展，并显示天空区域

### 需求：左右分区隔离
系统必须将左侧（放弃树）与右侧（达成树）的动态元素渲染在各自分区内，避免跨区出现。

#### 场景：动态元素不跨区
- **当** 天空或海底动态元素播放
- **那么** 左侧元素不会出现在右侧分区，右侧元素不会出现在左侧分区

### 需求：岛屿树根
系统必须在地平线位置绘制小岛，作为双树的树根起点。

#### 场景：树根可见
- **当** 用户进入“双界树”页面
- **那么** 双树在地平线小岛上生长，不出现悬浮树根

### 需求：动态环境效果
系统必须在天空与海底区域提供基础动态效果，以增强“双界树”的沉浸感。

#### 场景：天空动态
- **当** 用户进入“双界树”页面
- **那么** 系统展示动态云与随机飞过的小鸟，并让已解锁天空物种随机飞过

#### 场景：海底动态
- **当** 用户进入“双界树”页面
- **那么** 系统展示水底气泡的动态上浮效果、随机海草摆动与小鱼游动，并让已解锁海底物种随机游过

#### 场景：动态数量限制
- **当** 动态元素渲染
- **那么** 系统限制同时出现的动态元素数量以保持性能稳定

### 需求：像素风视觉风格
系统必须以像素风格呈现双界树页面中的动态元素与环境素材。

#### 场景：像素风一致性
- **当** 页面渲染云、鸟、气泡、海草、小鱼与未知生物
- **那么** 这些元素采用统一的像素风格视觉表现

### 需求：未知生物解锁
系统必须按每 100 米高度解锁新的未知生物，并区分海底与天空物种。

#### 场景：解锁海底物种
- **当** 放弃树高度达到新的 100 米阈值
- **那么** 系统解锁一个新的海底未知生物并显示在海底区域

#### 场景：解锁天空物种
- **当** 达成树高度达到新的 100 米阈值
- **那么** 系统解锁一个新的天空未知生物并显示在天空区域

#### 场景：达到解锁上限
- **当** 放弃树或达成树高度超过 10000 米
- **那么** 系统不再解锁新的未知生物

### 需求：物种命名规则
系统必须为海底与天空未知生物提供统一的命名规则与序号。

#### 场景：海底物种命名
- **当** 解锁新的海底未知生物
- **那么** 系统按“深海未知生物-001”到“深海未知生物-100”顺序命名

#### 场景：天空物种命名
- **当** 解锁新的天空未知生物
- **那么** 系统按“天穹未知生物-001”到“天穹未知生物-100”顺序命名

### 需求：物种解锁持久化
系统必须将已解锁的海底/天空物种持久化存储，并在重启后恢复展示。

#### 场景：重启后恢复物种
- **当** 用户重启应用并进入“双界树”页面
- **那么** 系统展示此前已解锁的物种状态

### 需求：解锁位置提示
系统必须在双树的生长路径上标记物种解锁的位置提示。

#### 场景：显示解锁提示
- **当** 用户查看双界树
- **那么** 页面在树干旁标记解锁高度提示以告知物种解锁位置
